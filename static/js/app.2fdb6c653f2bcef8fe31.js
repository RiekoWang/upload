webpackJsonp([1],{"+BTi":function(e,t){},"/I4U":function(e,t){},GSNz:function(e,t){},GXEp:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("/I4U"),n("+BTi");var i=n("yg6k"),o=n.n(i),l=(n("cwe7"),n("2X9z")),a=n.n(l),s=(n("GXEp"),n("mtrD")),r=n.n(s),u=(n("jAzQ"),n("wOhx")),p=n.n(u),c=n("7+uW");function d(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""}var f="",h=0,m={data:function(){return{ActionUrl:"",store:"",qrid:"",uploadBtn:!0,left:"",UploadUrl:"http://medlinks.oss-cn-shanghai.aliyuncs.com/",fileList:"",url:"http://139.224.172.143:8080",fileSize:""}},created:function(){var e=d("companyId"),t=d("qrid");d("fileSize");e=e.replace(/\"/g,""),this.store=e,this.qrid=t,this.left=parseInt(d("left")),this.ActionUrl=this.url+"/api/mdp/v2/company/"+t+"/file"},methods:{handleRemove:function(e,t){this.fileList=t.length,0==t.length&&(this.uploadBtn=!0)},handlePreview:function(e){},beforeAvatarUpload:function(e){var t=e.size/1024/1024<this.fileSize;return t||this.$notify.error({title:"错误",message:"上传头像图片大小不能超过 "+this.fileSize+"MB!"}),t},changeUploadImg:function(e,t){this.fileList=t.length,t.length>=1&&(this.uploadBtn=!1)},ExceedUploadingNumber:function(){this.$notify.error({title:"错误",message:"最多只可上传"+this.left+"张。"})},onUpload:function(e){var t=this,n=this,i=e.file.name,o=new FormData;o.append("uploadFile",e.file),n.$axios({method:"post",url:n.ActionUrl,data:o}).then(function(e){n.$notify({title:"成功",message:"图片"+i+"上传成功",type:"success"}),f+=""+n.UploadUrl+e.data+",",++h==n.fileList&&(h=0,200==e.status&&n.$axios({method:"post",url:t.url+"/api/mdp/v2/qr/upload/"+n.qrid,params:{filePath:f}}).then(function(e){window.opener=null,window.close()}).catch(function(e){}))}).catch(function(e){console.log(e),n.$notify.error({title:"错误",message:"图片"+i+"上传失败，请重试"}),window.opener=null,window.close()})},submitUpload:function(){this.$refs.upload.submit(),this.$refs.upload.clearFiles(),this.uploadBtn=!0}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return 0==e.left||e.left?n("div",{staticClass:"upload"},[n("el-upload",{ref:"upload",attrs:{action:"","auto-upload":!1,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUpload,"http-request":e.onUpload,"on-exceed":e.ExceedUploadingNumber,limit:e.left?e.left:null,multiple:!0,"on-change":e.changeUploadImg,"list-type":"picture-card"}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.uploadBtn},on:{click:e.submitUpload}},[e._v("点击上传"),n("i",{staticClass:"el-icon-upload el-icon--right"})])],1):e._e()},staticRenderFns:[]};var g={name:"App",components:{uploadView:n("VU/8")(m,v,!1,function(e){n("dKv2")},null,null).exports}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("uploadView")],1)},staticRenderFns:[]};var U=n("VU/8")(g,w,!1,function(e){n("GSNz")},null,null).exports,y=n("mtWM"),$=n.n(y);c.default.config.productionTip=!1,c.default.use(p.a),c.default.use(r.a),c.default.prototype.$axios=$.a,c.default.prototype.$message=a.a,c.default.prototype.$notify=o.a,new c.default({el:"#app",components:{App:U},template:"<App/>"})},cwe7:function(e,t){},dKv2:function(e,t){},jAzQ:function(e,t){}},["NHnr"]);